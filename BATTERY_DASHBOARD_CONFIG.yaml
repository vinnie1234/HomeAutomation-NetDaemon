# Battery Dashboard Configuration - ApexCharts Integration
# Vervang de huidige battery sectie in je dashboard met deze configuratie

- type: sections
  sections:
    # Battery Health Overview
    - type: grid
      cards:
        - type: heading
          heading: Battery Health Status
        - type: custom:apexcharts-card
          config_templates: default
          header:
            title: Battery Overview
            show: true
          card_mod:
            style: |
              ha-card {
                border-radius: 20px;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
              }
          series:
            - entity: sensor.battery_devices_critical
              name: Critical
              color: '#ff4444'
              show:
                legend_value: false
            - entity: sensor.battery_devices_warning  
              name: Warning
              color: '#ffaa00'
              show:
                legend_value: false
            - entity: sensor.battery_devices_excellent
              name: Good
              color: '#44ff44'
              show:
                legend_value: false
          chart_type: donut
          apex_config:
            chart:
              height: 300
            plotOptions:
              pie:
                donut:
                  size: '60%'
                  labels:
                    show: true
                    total:
                      show: true
                      label: 'Devices'
            legend:
              position: bottom

    # Battery Replacement Timeline  
    - type: grid
      cards:
        - type: heading
          heading: Replacement Schedule
        - type: entities
          entities:
            - entity: sensor.next_battery_replacement
              name: Next Replacement
              icon: mdi:calendar-clock
            - entity: sensor.batteries_to_buy
              name: Shopping List
              icon: mdi:cart-outline
          state_color: true

    # Trend Analysis Charts
    - type: grid  
      cards:
        - type: heading
          heading: Battery Discharge Trends
        - type: custom:apexcharts-card
          config_templates: default
          header:
            title: Days Remaining Trends
            show: true
          card_mod:
            style: |
              ha-card {
                border-radius: 20px;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
              }
          graph_span: 30d
          span:
            end: day
          series:
            - entity: sensor.badkamer_battery_days_remaining
              name: Badkamer Motion
              color: '#1f77b4'
              stroke_width: 3
              show:
                legend_value: false
            - entity: sensor.gang_battery_days_remaining
              name: Gang Motion  
              color: '#ff7f0e'
              stroke_width: 3
              show:
                legend_value: false
            - entity: sensor.slaapkamer_battery_days_remaining
              name: Slaapkamer Switch
              color: '#2ca02c'
              stroke_width: 3
              show:
                legend_value: false
            - entity: sensor.berging_battery_days_remaining
              name: Berging Motion
              color: '#d62728'
              stroke_width: 3
              show:
                legend_value: false
          apex_config:
            chart:
              height: 400
              type: line
              zoom:
                enabled: true
            stroke:
              curve: smooth
            markers:
              size: 4
            grid:
              show: true
              strokeDashArray: 3
            yaxis:
              title:
                text: 'Days Remaining'
              min: 0
              max: 400
            annotations:
              yaxis:
                - y: 30
                  borderColor: '#ff4444'
                  label:
                    text: 'Replace Soon'
                    style:
                      color: '#ffffff'
                      background: '#ff4444'
                - y: 90  
                  borderColor: '#ffaa00'
                  label:
                    text: 'Plan Replacement'
                    style:
                      color: '#ffffff'
                      background: '#ffaa00'

        - type: custom:apexcharts-card
          config_templates: default
          header:
            title: Discharge Rate Analysis
            show: true
          card_mod:
            style: |
              ha-card {
                border-radius: 20px;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
              }
          graph_span: 7d
          span:
            end: day
          series:
            - entity: sensor.badkamer_battery_discharge_rate
              name: Badkamer
              color: '#1f77b4'
              stroke_width: 3
            - entity: sensor.gang_battery_discharge_rate  
              name: Gang
              color: '#ff7f0e'
              stroke_width: 3
            - entity: sensor.slaapkamer_battery_discharge_rate
              name: Slaapkamer
              color: '#2ca02c'
              stroke_width: 3
            - entity: sensor.berging_battery_discharge_rate
              name: Berging
              color: '#d62728'
              stroke_width: 3
          apex_config:
            chart:
              height: 350
              type: line
            stroke:
              curve: smooth
            markers:
              size: 3
            yaxis:
              title:
                text: 'Discharge Rate (%/day)'
              min: 0
            grid:
              show: true
              strokeDashArray: 3

    # Device Details
    - type: grid
      cards:
        - type: heading
          heading: Device Health Details
        - type: entities
          entities:
            - entity: sensor.badkamer_battery_health_status
              name: 'Badkamer Motion'
              secondary_info: last-updated
            - entity: sensor.badkamer_battery_2_health_status  
              name: 'Badkamer Switch'
              secondary_info: last-updated
            - entity: sensor.gang_battery_health_status
              name: 'Gang Motion'
              secondary_info: last-updated
            - entity: sensor.gang_battery_2_health_status
              name: 'Gang Switch'  
              secondary_info: last-updated
            - entity: sensor.berging_battery_health_status
              name: 'Berging Motion'
              secondary_info: last-updated
            - entity: sensor.slaapkamer_battery_health_status
              name: 'Slaapkamer Switch'
              secondary_info: last-updated
            - entity: sensor.woonkamer_battery_health_status
              name: 'Woonkamer Switch'
              secondary_info: last-updated
          state_color: true

    # Battery Age Monitoring
    - type: grid
      cards:
        - type: heading
          heading: Battery Age & Performance
        - type: custom:apexcharts-card
          config_templates: default
          header:
            title: Battery Age vs Expected Life
            show: true
          card_mod:
            style: |
              ha-card {
                border-radius: 20px;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
              }
          series:
            - entity: sensor.badkamer_battery_age_days
              name: Badkamer (AA)
              color: '#1f77b4'
              stroke_width: 4
            - entity: sensor.gang_battery_age_days
              name: Gang (AA)
              color: '#ff7f0e'  
              stroke_width: 4
            - entity: sensor.slaapkamer_battery_age_days
              name: Slaapkamer (CR2032)
              color: '#2ca02c'
              stroke_width: 4
            - entity: sensor.berging_battery_age_days
              name: Berging (AA)
              color: '#d62728'
              stroke_width: 4
          apex_config:
            chart:
              height: 350
              type: bar
              horizontal: true
            plotOptions:
              bar:
                horizontal: true
                dataLabels:
                  position: 'center'
            yaxis:
              title:
                text: 'Devices'
            xaxis:
              title:
                text: 'Days Since Replacement'
              max: 730
            annotations:
              xaxis:
                - x: 365
                  borderColor: '#ffaa00'
                  label:
                    text: 'AA Expected Life'
                    style:
                      color: '#ffffff'
                      background: '#ffaa00'
                - x: 730
                  borderColor: '#44ff44'
                  label:
                    text: 'CR2032 Expected Life'
                    style:
                      color: '#ffffff'  
                      background: '#44ff44'

    # Maintenance Planning
    - type: grid
      cards:
        - type: heading
          heading: Maintenance Calendar
        - type: custom:apexcharts-card
          config_templates: default
          header:
            title: Replacement Schedule (Next 90 Days)
            show: true
          card_mod:
            style: |
              ha-card {
                border-radius: 20px;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
              }
          graph_span: 90d
          span:
            start: day
          series:
            - entity: sensor.badkamer_battery_replacement_date
              name: Badkamer
              color: '#1f77b4'
              stroke_width: 0
              show:
                legend_value: false
            - entity: sensor.gang_battery_replacement_date
              name: Gang
              color: '#ff7f0e'
              stroke_width: 0
              show:
                legend_value: false
            - entity: sensor.slaapkamer_battery_replacement_date
              name: Slaapkamer  
              color: '#2ca02c'
              stroke_width: 0
              show:
                legend_value: false
          apex_config:
            chart:
              height: 200
              type: scatter
            markers:
              size: 8
            grid:
              show: true
              xaxis:
                lines:
                  show: true
            xaxis:
              type: datetime
              title:
                text: 'Replacement Date'
            yaxis:
              show: false

# Gebruik instructies:
# 1. Installeer ApexCharts card: https://github.com/RomRider/apexcharts-card  
# 2. Vervang je huidige battery sectie met deze configuratie
# 3. Pas entity names aan naar jouw specifieke setup
# 4. Test de dashboard nadat alle entities zijn aangemaakt
# 5. Pas kleuren en styling aan naar jouw voorkeur